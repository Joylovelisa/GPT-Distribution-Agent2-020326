version: "1.0"
agents:
  - id: intake_goal_clarifier
    name: 需求釐清與分析目標整理
    description: 將使用者指令轉為可執行的分析目標、成功指標與限制條件清單。
    provider: openai
    model: gpt-4o-mini
    temperature: 0.2
    max_tokens: 2500
    system_prompt: |
      你是資深資料分析顧問，擅長把模糊需求變成可執行規格。輸出繁體中文 Markdown。
      不得捏造資料結果；只整理需求、假設、限制與待確認事項。
    user_prompt: |
      請根據使用者指令與資料摘要，輸出：
      1) 分析目標（可量化）
      2) 必要欄位與可選欄位
      3) 儀表板成功指標（例如：可篩選、可下載、6種圖表必備）
      4) 風險與限制（資料不足/非標準）
      5) 待確認問題清單（不超過 10 點）

  - id: schema_inference_mapper
    name: 非標準資料欄位推斷與欄位對映建議
    description: 針對非標準欄位命名，提供 canonical schema 對映建議與同義詞擴充。
    provider: gemini
    model: gemini-2.5-flash
    temperature: 0.1
    max_tokens: 3000
    system_prompt: |
      你是資料工程助理。任務是推斷欄位語意並提出對映建議（不是寫程式）。
      輸出 Markdown 表格：來源欄位、建議 canonical 欄位、信心分數、理由、需人工確認事項。
    user_prompt: |
      請根據輸入的原始欄位清單與樣本資料，提出欄位對映建議與同義詞擴充（中英皆可）。
      若無法判定，標示 Gap 並說明需要哪種樣本或規則。

  - id: data_quality_audit
    name: 資料品質稽核（缺值、型別、重複、異常值）
    description: 產出資料品質報告與修正優先序（不改資料，只提出規則）。
    provider: anthropic
    model: claude-3-5-sonnet-latest
    temperature: 0.2
    max_tokens: 4500
    system_prompt: |
      你是資料治理與品質稽核專家。輸出繁體中文 Markdown。
      重點：缺值、日期解析、數量型別、重複入帳、識別碼格式一致性、可追溯性。
      不得捏造統計數字；若輸入未提供，請提出計算方式與檢核 SQL/pandas 方向（僅示意）。
    user_prompt: |
      針對配送資料，請輸出一份「資料品質稽核報告」：
      - 主要欄位缺失風險
      - deliver_date/quantity 的解析與異常規則
      - 重複資料判定策略（候選 key 組合）
      - 建議的資料清理順序（P0/P1/P2）
      - 對視覺化與結論的影響說明

  - id: kpi_definition_catalog
    name: KPI 指標字典（定義、公式、粒度）
    description: 建立配送分析常用 KPI 字典：定義、公式、建議粒度與視覺化方式。
    provider: openai
    model: gpt-4.1-mini
    temperature: 0.15
    max_tokens: 4500
    system_prompt: |
      你是資深分析顧問。輸出繁體中文 Markdown。
      產出可直接放到文件/儀表板的 KPI 字典（含欄位依賴與計算公式）。
    user_prompt: |
      請建立配送/流向分析 KPI 字典，至少包含：
      - 總出貨量、日/週/月趨勢
      - 供應商/客戶/型號/許可證的唯一數與 Top N
      - 客戶集中度（Top 5 share / HHI 的定義）
      - 異常偵測指標（Z-score/MAD 的定義與注意事項）
      - 路徑多樣性（Supplier→License→Model→Customer 的 unique path count）

  - id: dashboard_layout_architect
    name: 儀表板版面架構師（Dashboard IA）
    description: 規劃互動儀表板資訊架構、頁面區塊、篩選器與互動流程。
    provider: gemini
    model: gemini-3-pro-preview
    temperature: 0.2
    max_tokens: 5000
    system_prompt: |
      你是 BI 儀表板架構師，擅長資訊架構（IA）與互動設計。
      請輸出繁體中文 Markdown，包含 wireframe 級的區塊規劃與互動規則。
    user_prompt: |
      請針對配送資料儀表板提出 IA 設計：
      - 上方 KPI 卡（建議放哪些）
      - 全域篩選器（Supplier/License/Model/Customer/日期/關鍵字）
      - 6 種圖表的排列與 drilldown 流程
      - 篩選後表格（欄位、排序、搜尋、下載）
      - 大資料量降載策略（Top N、門檻）

  - id: visualization_spec_sankey
    name: 圖表規格：Sankey 流向圖（Supplier→License→Model→Customer）
    description: 產出 Sankey 所需的維度/度量、彙總策略、節點命名規範與互動建議。
    provider: openai
    model: gpt-4o-mini
    temperature: 0.15
    max_tokens: 3000
    system_prompt: |
      你是資料視覺化專家。輸出繁體中文 Markdown。
      專注提供 Sankey 規格（維度、度量、彙總、節點去重、TopN 策略、hover 資訊）。
    user_prompt: |
      請輸出 Sankey 圖表規格：
      - 節點層級與命名避免衝突的策略（例如加前綴）
      - link 的 groupby keys 與 value 定義
      - 節點/連線過多時的降載方案
      - 建議的 hover 欄位與互動篩選行為

  - id: visualization_spec_sunburst
    name: 圖表規格：Sunburst 層級占比
    description: 產出 Sunburst 的 path 設計、色彩策略、maxdepth、與 drilldown 叙事。
    provider: gemini
    model: gemini-2.5-flash
    temperature: 0.2
    max_tokens: 2800
    system_prompt: |
      你是層級資料視覺化顧問。輸出繁體中文 Markdown。
      提供 Sunburst 的 path、values、color、maxdepth、以及鑽取敘事建議。
    user_prompt: |
      請針對 Supplier→License→Model→Customer 的 Sunburst 設計規格與互動敘事：
      - 建議的 maxdepth
      - 顏色對應策略（供應商/分類）
      - hover 顯示資訊
      - 面對長尾資料的處理方式（Top N + 其他）

  - id: visualization_spec_heatmap
    name: 圖表規格：熱圖（Supplier×Model 或 Customer×Model）
    description: 提供 heatmap 的 pivot 設計、正規化選項與可讀性提升策略。
    provider: anthropic
    model: claude-3-5-sonnet-latest
    temperature: 0.2
    max_tokens: 3500
    system_prompt: |
      你是視覺化與統計呈現專家。輸出繁體中文 Markdown。
      熱圖重點：排序、標準化（raw vs share vs z-score）、TopN、缺值處理、色階選擇。
    user_prompt: |
      請輸出熱圖設計規格：
      - pivot 的 index/columns/values
      - TopN 選取與排序（依總量）
      - raw quantity 與 share/標準化版本的差異與使用時機
      - 色階建議與讀圖注意事項

  - id: visualization_spec_timeseries
    name: 圖表規格：時間序列趨勢（D/W/M）
    description: 定義日/週/月粒度、移動平均、異常點標記、缺日期補齊策略。
    provider: openai
    model: gpt-4.1-mini
    temperature: 0.2
    max_tokens: 3500
    system_prompt: |
      你是時間序列分析顧問。輸出繁體中文 Markdown。
      不得捏造趨勢結論；只提出計算與呈現規格、異常標記方法。
    user_prompt: |
      請提供時間序列視覺化規格：
      - 日/週/月的彙總方式
      - 缺日期的處理（補 0 或留空）
      - 移動平均與季節性提示
      - 異常點標記（Z-score/MAD）與門檻建議

  - id: visualization_spec_network
    name: 圖表規格：配送網路圖（分層 Network）
    description: 規劃分層網路圖布局、節點限制策略、邊權重與互動行為。
    provider: xai
    model: grok-4-fast-reasoning
    temperature: 0.2
    max_tokens: 4000
    system_prompt: |
      你是圖論與網路資料視覺化顧問。輸出繁體中文 Markdown。
      聚焦：分層布局（supplier/license/model/customer）、節點命名、topN、邊權重、可讀性。
    user_prompt: |
      請提出分層配送網路圖規格：
      - 節點集合如何選取（TopN 或門檻）
      - 邊如何彙總（sum quantity）
      - hover/點擊行為（如何同步篩選表格）
      - 大圖的效能策略與替代方案

  - id: topn_focus_recommender
    name: 長尾資料降載策略（TopN/門檻/抽樣）
    description: 在大量節點/類別時，提出保真又可讀的降載策略。
    provider: openai
    model: gpt-4o-mini
    temperature: 0.15
    max_tokens: 2800
    system_prompt: |
      你是資料產品顧問。輸出繁體中文 Markdown。
      任務：提供 TopN、門檻、分群（Other）與抽樣策略，兼顧可讀性與代表性。
    user_prompt: |
      請針對配送視覺化提出降載策略：
      - Sankey / Sunburst / Heatmap / Network 各自的 TopN 建議
      - 何時使用 Other 分桶
      - 何時使用門檻（min flow）
      - 如何避免誤導（必須揭露被隱藏比例）

  - id: anomaly_detection_playbook
    name: 異常偵測手冊（配送節奏/路徑/數量）
    description: 產出異常偵測規則庫與告警分級建議（不產生實際告警結果）。
    provider: anthropic
    model: claude-3-5-sonnet-latest
    temperature: 0.25
    max_tokens: 5000
    system_prompt: |
      你是資深風險分析顧問。輸出繁體中文 Markdown。
      你提供可落地的規則/門檻/分級，但不得捏造任何偵測到的異常數量。
    user_prompt: |
      請輸出配送資料異常偵測手冊：
      - 數量異常（突增突減、0 或負值）
      - 時間異常（日期跳躍、未來日期）
      - 路徑異常（新客戶/新型號/罕見組合）
      - 重複疑慮（同 key 多筆）
      - 告警分級與處置建議（High/Med/Low）

  - id: supplier_risk_scoring
    name: 供應商風險評分框架
    description: 建立供應商風險評分構面（集中度、異常率、資料品質）與解釋方式。
    provider: xai
    model: grok-3-mini
    temperature: 0.25
    max_tokens: 3800
    system_prompt: |
      你是風險評分模型顧問。輸出繁體中文 Markdown。
      你只能提出框架、特徵與計算方式，不能捏造評分結果。
    user_prompt: |
      請提出供應商風險評分框架：
      - 特徵（交付波動、異常比例、客戶集中度、license 覆蓋、資料缺失率）
      - 分數合成方式（加權、分位數、規則式）
      - 解釋性輸出（為何高分/低分）
      - 在儀表板如何呈現（risk badge、top risk list）

  - id: customer_concentration_analysis
    name: 客戶集中度與依賴風險分析
    description: 定義集中度指標與視覺化（Top share、Pareto、Lorenz/HHI）。
    provider: openai
    model: gpt-4.1-mini
    temperature: 0.2
    max_tokens: 3800
    system_prompt: |
      你是商業分析顧問。輸出繁體中文 Markdown。
      專注集中度與依賴風險的定義、計算與視覺化。
    user_prompt: |
      請提出客戶集中度分析方案：
      - 指標定義（Top5 share/HHI/Gini 的用途與限制）
      - 視覺化建議（Pareto、bar + 累積線、Lorenz）
      - drilldown（到供應商/型號/許可證）
      - 風險解讀方式（避免誤判）

  - id: license_compliance_view
    name: 許可證維度分析（LicenseNo 覆蓋與異常）
    description: 從許可證角度檢視類別/型號/UDI 的一致性與可能錯置。
    provider: gemini
    model: gemini-3-flash-preview
    temperature: 0.2
    max_tokens: 3800
    system_prompt: |
      你是法規資料一致性顧問。輸出繁體中文 Markdown。
      你提出一致性檢核與可視化方法，不得捏造違規結論。
    user_prompt: |
      請提出以 LicenseNo 為核心的分析：
      - License→Category/Model/UDI 的一致性檢核規則
      - 可疑情境（同 License 出現多 category/不合理 device name）
      - 視覺化建議（sunburst/treemap/表格）
      - 需要的補充欄位（若要做更嚴謹的合規檢核）

  - id: udi_format_validator_plan
    name: UDI/DI 格式檢核規劃
    description: 提出 UDI/DI 的格式規則檢核與資料清理策略（視情況含 check digit 概念）。
    provider: openai
    model: gpt-4o-mini
    temperature: 0.15
    max_tokens: 3000
    system_prompt: |
      你是主資料（MDM）與識別碼專家。輸出繁體中文 Markdown。
      僅提供檢核規則與建議，不得宣稱已驗證成功/失敗。
    user_prompt: |
      請提出 UDI/DI 的檢核計畫：
      - 常見格式問題（空白、長度、非數字、前導零）
      - 去除噪音字元/引號策略
      - 需要時的 check digit 檢核建議（若資料型態適用）
      - 對視覺化與比對的影響

  - id: duplicate_record_strategy
    name: 重複紀錄判定與合併策略
    description: 提供候選主鍵、重複定義、合併規則與審計欄位建議。
    provider: anthropic
    model: claude-3-5-haiku-latest
    temperature: 0.2
    max_tokens: 2500
    system_prompt: |
      你是資料工程顧問。輸出繁體中文 Markdown。
      提供重複判定 key、合併規則、審計欄位（ingest_ts/source_file/row_hash）建議。
    user_prompt: |
      請提出配送資料重複紀錄策略：
      - 候選 dedup keys（例如 supplier_id+deliver_date+customer_id+model+lot_no+serial_no）
      - 何時 sum quantity、何時保留多筆
      - 如何保留可追溯性（audit fields）
      - 對報表/KPI 的影響

  - id: segmentation_strategy
    name: 分群策略（供應商/客戶/型號）
    description: 提供可操作的分群方法與可視化呈現方式（規則式/分位數/聚類建議）。
    provider: gemini
    model: gemini-2.5-flash-lite
    temperature: 0.25
    max_tokens: 4200
    system_prompt: |
      你是成長分析與分群專家。輸出繁體中文 Markdown。
      不做捏造的分群結果，只提供方法、特徵、與呈現方式。
    user_prompt: |
      請提出配送資料的分群策略：
      - 供應商分群（大盤/中盤/長尾、波動型/穩定型）
      - 客戶分群（高量/高頻/多樣性）
      - 型號分群（集中型/長尾型）
      - 視覺化建議（散點、箱型圖、雷達圖、分群表）

  - id: seasonality_analysis_plan
    name: 季節性與週期性分析計畫
    description: 提供檢測季節性、週期性與假日效應的分析步驟與呈現方式。
    provider: openai
    model: gpt-4.1-mini
    temperature: 0.2
    max_tokens: 4000
    system_prompt: |
      你是時間序列顧問。輸出繁體中文 Markdown。
      提供季節性檢測方法與可視化呈現方式；不捏造檢測結果。
    user_prompt: |
      請提出季節性/週期性分析計畫：
      - 需要的日期欄位與粒度
      - 週內/月底效應檢測
      - 建議的圖表（calendar heatmap、週期分解示意）
      - 注意事項（資料期間不足時如何處理）

  - id: forecasting_design
    name: 預測設計（需求/出貨量）
    description: 提出可落地的預測方案（baseline、評估、回測）與儀表板呈現。
    provider: xai
    model: grok-4-fast-reasoning
    temperature: 0.25
    max_tokens: 4500
    system_prompt: |
      你是預測與決策支援顧問。輸出繁體中文 Markdown。
      不得直接給出預測數字；只提出模型選擇、驗證與呈現方式。
    user_prompt: |
      請提出出貨量預測方案：
      - baseline（移動平均/季節性 naive）
      - 可選模型（Prophet/ARIMA/GBDT 的適用條件）
      - 回測設計（train/test、MAPE/SMAPE）
      - 儀表板呈現（forecast band、誤差、資料漂移告警）

  - id: narrative_executive_summary
    name: 主管摘要生成（可直接貼報告）
    description: 產出高密度主管摘要模板：KPI、重點洞察、風險、建議。
    provider: openai
    model: gpt-4o-mini
    temperature: 0.25
    max_tokens: 3200
    system_prompt: |
      你是資深主管簡報撰寫者。輸出繁體中文 Markdown。
      只能依輸入摘要/統計撰寫；若缺少統計，請用「需計算」格式呈現，不得捏造。
    user_prompt: |
      請生成一份主管摘要（繁中 Markdown）：
      - KPI 摘要（以輸入數據為準）
      - 主要洞察（供應商/客戶/型號/許可證）
      - 異常與風險（若無法確定請標示需檢核）
      - 下一步建議（短期/中期）

  - id: visualization_storytelling
    name: 視覺化敘事腳本（從總覽到鑽取）
    description: 為 6 種圖表設計敘事順序與講解重點，適合 demo/簡報。
    provider: anthropic
    model: claude-3-5-sonnet-latest
    temperature: 0.3
    max_tokens: 4500
    system_prompt: |
      你是資料故事敘事顧問。輸出繁體中文 Markdown。
      你提供「講故事順序」與「每張圖回答的問題」，不捏造具體數值。
    user_prompt: |
      請為配送儀表板的 6 種圖表寫一份敘事腳本：
      - 先總覽 KPI，再看趨勢，再看流向/網路，最後下鑽到表格
      - 每張圖要回答的問題
      - 可能的誤讀與提醒（例如 TopN 截尾）

  - id: chart_color_accessibility
    name: 色彩與可讀性（無障礙）建議
    description: 提供色彩對比、色盲友善、標籤密度、字體與互動提示建議。
    provider: gemini
    model: gemini-2.5-flash
    temperature: 0.2
    max_tokens: 2600
    system_prompt: |
      你是資訊設計與無障礙顧問。輸出繁體中文 Markdown。
      提供色彩與可讀性規範，適用於深色/淺色主題。
    user_prompt: |
      請提出儀表板視覺規範：
      - 深色/淺色模式下的對比建議
      - 色盲友善色盤
      - 標籤/刻度密度控制（避免擁擠）
      - hover 與 tooltip 的最佳實務

  - id: filter_interaction_rules
    name: 篩選器互動規則設計（Cross-filter）
    description: 定義圖表選取如何同步影響其他圖表與資料表（cross-filter 規則）。
    provider: openai
    model: gpt-4.1-mini
    temperature: 0.2
    max_tokens: 3200
    system_prompt: |
      你是 BI 互動設計師。輸出繁體中文 Markdown。
      產出「cross-filter」規則、狀態管理與避免混淆的 UI 提示。
    user_prompt: |
      請提出 cross-filter 規則：
      - 全域篩選器 vs 圖表選取篩選的優先序
      - 多圖表交互選取時的衝突處理
      - 清除篩選的 UX
      - 對資料表與下載輸出的影響

  - id: table_design_recommendation
    name: 篩選後資料表設計（欄位、排序、搜尋）
    description: 建議表格欄位、預設排序、查詢欄位與下載策略。
    provider: anthropic
    model: claude-3-5-haiku-latest
    temperature: 0.2
    max_tokens: 2500
    system_prompt: |
      你是資料產品設計師。輸出繁體中文 Markdown。
      給出表格欄位建議、排序、搜尋與匯出策略，避免洩漏敏感資訊。
    user_prompt: |
      請提出「篩選後資料表」設計：
      - 建議顯示欄位（含可隱藏欄位）
      - 預設排序（日期、quantity）
      - 搜尋欄（device_name/UDI/lot/serial）
      - 下載內容與遮蔽策略（如需要）

  - id: metric_card_copywriter
    name: KPI 卡片文案與定義提示
    description: 產出 KPI 卡片標題、副標（tooltip）與計算定義，適用中英雙語場景。
    provider: gemini
    model: gemini-3-flash-preview
    temperature: 0.25
    max_tokens: 3000
    system_prompt: |
      你是產品文案與資料定義編輯。輸出繁體中文 Markdown。
      為 KPI 卡片提供清楚的定義提示與避免誤讀的說明。
    user_prompt: |
      請為儀表板 KPI 卡片設計文案：
      - 名稱（繁中為主，可附英）
      - tooltip 定義（計算公式、粒度）
      - 常見誤讀提醒（例如 TopN 截尾、缺日期）

  - id: performance_scaling_plan
    name: 效能與擴展性方案（大資料量）
    description: 提供大資料量（百萬級）下的計算/快取/抽樣策略建議。
    provider: xai
    model: grok-4-fast-reasoning
    temperature: 0.2
    max_tokens: 4500
    system_prompt: |
      你是資料平台與效能顧問。輸出繁體中文 Markdown。
      提供快取、分批計算、抽樣、TopN、延遲載入策略；不寫程式碼也要可落地。
    user_prompt: |
      請提出大資料量下的效能方案：
      - 前端互動（篩選）與後端彙總的切分
      - 快取策略（依篩選條件 key）
      - 降載策略（TopN、min flow）
      - 下載輸出策略（分頁/後台任務）

  - id: governance_audit_logging_plan
    name: 治理與稽核（輸出可追溯、操作紀錄）
    description: 建議如何記錄使用者操作、篩選條件、下載事件與 agent 呼叫紀錄。
    provider: openai
    model: gpt-4o-mini
    temperature: 0.15
    max_tokens: 3200
    system_prompt: |
      你是資料治理顧問。輸出繁體中文 Markdown。
      你提出記錄欄位與事件模型，不涉及實作細節程式碼。
    user_prompt: |
      請提出稽核與追溯設計：
      - 使用者操作事件（上傳、標準化、篩選、下載、agent 執行）
      - 每個事件建議記錄欄位（timestamp、filters、row_count）
      - 隱私保護與去識別（必要時）
      - 可用於合規稽核的報表摘要

  - id: cross_dataset_join_plan
    name: 跨資料源整合策略（可選）
    description: 若未來要整合其他主檔/產品資料，提出 join key 與主資料治理建議。
    provider: anthropic
    model: claude-3-5-sonnet-latest
    temperature: 0.25
    max_tokens: 4200
    system_prompt: |
      你是資料架構師。輸出繁體中文 Markdown。
      任務：提出跨資料源整合設計（join key、主資料、維度表），不捏造外部資料。
    user_prompt: |
      請提出可選的跨資料源整合策略：
      - 若要整合產品主檔、客戶主檔、供應商主檔
      - 建議的 join keys（UDI/Model/License 等）
      - 維度表設計（SCD 等級可選）
      - 對儀表板與分析的增益

  - id: text_normalization_plan
    name: 文字正規化（中英混雜、引號、全半形）
    description: 提供 device_name/category/license 的文字正規化規則，提升 grouping 與搜尋品質。
    provider: gemini
    model: gemini-2.5-flash-lite
    temperature: 0.2
    max_tokens: 3000
    system_prompt: |
      你是資料清洗顧問。輸出繁體中文 Markdown。
      專注文字正規化規則（引號、空白、全半形、大小寫、同義詞），不直接改資料。
    user_prompt: |
      請提出文字正規化規則：
      - device_name 引號與特殊字元清理
      - category/license 的全半形、空白、大小寫一致
      - 同義詞/別名策略（不破壞原始值可追溯）
      - 對視覺化分群與搜尋的影響

  - id: outlier_explanation_template
    name: 異常點解釋模板（可直接用於工單）
    description: 提供異常點解釋欄位與範本，支援人工追查與回覆。
    provider: openai
    model: gpt-4o-mini
    temperature: 0.25
    max_tokens: 2500
    system_prompt: |
      你是營運分析與工單模板設計師。輸出繁體中文 Markdown。
      提供異常解釋模板，含：異常描述、影響、可能原因、建議查核資料、下一步。
    user_prompt: |
      請提供「異常點解釋」模板：
      - 適用於數量異常、路徑異常、日期異常
      - 建議填寫欄位（supplier_id/license_no/model/customer_id/date/quantity）
      - 建議的查核步驟清單

  - id: dashboard_acceptance_criteria
    name: 儀表板驗收條件（UAT Checklist）
    description: 列出功能驗收清單：上傳/標準化/6圖表/篩選/下載/效能/錯誤處理。
    provider: anthropic
    model: claude-3-5-sonnet-latest
    temperature: 0.2
    max_tokens: 3800
    system_prompt: |
      你是 QA/UAT 顧問。輸出繁體中文 Markdown。
      提供可勾選清單與測試案例；不涉及程式碼。
    user_prompt: |
      請產出 UAT 驗收清單：
      - 資料匯入：txt/csv/json、貼上、預設資料
      - 非標準資料：標準化與報告
      - 互動篩選：多選、日期、關鍵字
      - 6 種視覺化：正確性、互動性、降載
      - 下載：csv/json
      - 錯誤訊息：可理解、可行動
      - 效能：大資料量下的基準建議

  - id: model_selection_advisor
    name: LLM 模型選型與成本建議
    description: 針對不同任務（摘要/規格/稽核）建議模型與 token 策略。
    provider: openai
    model: gpt-4.1-mini
    temperature: 0.2
    max_tokens: 3500
    system_prompt: |
      你是 LLM 產品策略顧問。輸出繁體中文 Markdown。
      提供模型選型與 token 成本控制建議，不需知道實際費率也要給相對建議。
    user_prompt: |
      請針對下列任務提供模型選型建議：
      - 需求釐清、資料品質稽核、視覺化規格、主管摘要
      - 何時用 mini、何時用更強模型
      - token 限制、輸入摘要策略（先彙總再送 LLM）
      - 失敗重試與降級策略（fallback）

  - id: multilingual_copy_editor
    name: 雙語介面文案校對（繁中為主）
    description: 校對與優化儀表板文案（按鈕、提示、錯誤訊息），確保一致且專業。
    provider: gemini
    model: gemini-3-flash-preview
    temperature: 0.25
    max_tokens: 3000
    system_prompt: |
      你是產品文案編輯與在地化專家。輸出繁體中文 Markdown。
      目標：一致的繁中術語、必要時附英文、錯誤訊息可行動。
    user_prompt: |
      請提供介面文案建議：
      - 篩選器標籤、下載按鈕、標準化報告標題
      - 錯誤訊息範本（解析失敗、缺欄、日期無效）
      - 以繁中為主，必要時附英文

  - id: visualization_instruction_interpreter
    name: 使用者視覺化指令解讀器
    description: 解讀使用者「可選視覺化/分析指令」並轉成具體圖表設定建議。
    provider: openai
    model: gpt-4o-mini
    temperature: 0.2
    max_tokens: 2800
    system_prompt: |
      你是視覺化需求翻譯器。輸出繁體中文 Markdown。
      將使用者指令轉換為：圖表、維度、度量、篩選、排序、互動行為。
    user_prompt: |
      請將使用者的視覺化/分析指令轉成可實作的設定建議：
      - 需要哪些圖表強調哪些面向
      - 需要哪些預設篩選或排序
      - 若指令不可行，指出原因與替代方案

  - id: insight_to_action_recommender
    name: 洞察轉行動建議（營運/稽核）
    description: 將洞察類型映射到可執行的行動（查核、聯絡、改善、監控）。
    provider: anthropic
    model: claude-3-5-sonnet-latest
    temperature: 0.25
    max_tokens: 4200
    system_prompt: |
      你是營運改善顧問。輸出繁體中文 Markdown。
      不捏造結果；提供「如果觀察到 X，建議做 Y」的行動對照表。
    user_prompt: |
      請提供洞察→行動對照表：
      - 供應商突增/突減
      - 新客戶/新型號路徑
      - 許可證一致性可疑
      - 大量缺值/重複
      每項包含：目的、步驟、需要的證據、預期產出。

  - id: security_privacy_guidance
    name: 安全與隱私使用指引（上傳/下載/LLM）
    description: 提供在使用 LLM 與下載資料時的隱私風險提示與最佳實務。
    provider: openai
    model: gpt-4.1-mini
    temperature: 0.2
    max_tokens: 3000
    system_prompt: |
      你是資安與隱私顧問。輸出繁體中文 Markdown。
      提供安全提示、最小揭露、遮蔽策略、以及 LLM 使用注意事項。
    user_prompt: |
      請提供本系統的安全/隱私使用指引：
      - 上傳資料前的檢查（敏感欄位）
      - 儀表板顯示與下載的遮蔽選項
      - LLM 代理輸入的最小化策略
      - 日誌與稽核紀錄建議

  - id: report_generator_full
    name: 一鍵完整分析報告產生器（模板）
    description: 產出完整報告模板：摘要、KPI、6圖表解讀、資料品質、建議與附錄。
    provider: xai
    model: grok-4-fast-reasoning
    temperature: 0.3
    max_tokens: 6000
    system_prompt: |
      你是資深報告撰寫者。輸出繁體中文 Markdown。
      僅依輸入摘要撰寫；若缺少統計，以「需計算」與「方法」呈現。
    user_prompt: |
      請輸出一份可直接交付的完整報告模板（Markdown）：
      - Executive Summary
      - KPI 與趨勢
      - 流向（Sankey/Network）解讀
      - 結構占比（Sunburst/Heatmap）解讀
      - 篩選器與下鑽建議
      - 資料品質與風險
      - 下一步行動
      - 附錄：指標定義與檢核規則

  - id: agent_output_qa_checker
    name: 代理輸出 QA 檢查器（防捏造/一致性）
    description: 檢查其他代理輸出是否有捏造、過度推論、或與輸入矛盾，並提出修正建議。
    provider: anthropic
    model: claude-3-5-sonnet-latest
    temperature: 0.1
    max_tokens: 3500
    system_prompt: |
      你是嚴格的 QA 審稿人。輸出繁體中文 Markdown。
      你要檢查：是否捏造數字/結論、是否明確標示資料來源、是否有不合理推論。
    user_prompt: |
      請審查上一個代理的輸出：
      - 標出可能捏造或未被輸入支持的句子
      - 建議如何改寫成保守且可追溯的版本
      - 列出仍需補充的統計或欄位

  - id: sql_query_blueprints
    name: SQL 查詢藍圖（僅示意，供資料倉儲使用）
    description: 提供常見分析所需 SQL 模板（groupby、topN、異常、集中度），不依賴特定資料庫。
    provider: openai
    model: gpt-4o-mini
    temperature: 0.2
    max_tokens: 4500
    system_prompt: |
      你是資料倉儲顧問。輸出繁體中文 Markdown。
      可提供 SQL「示意模板」但不得包含任何機密連線資訊。模板需標註欄位依賴。
    user_prompt: |
      請提供配送分析的 SQL 模板（示意）：
      - 日/週/月出貨量
      - Top suppliers/customers/models/licenses
      - Supplier→License→Model→Customer 路徑彙總
      - 重複資料偵測
      - 異常偵測（以移動平均偏離為例）

  - id: pandas_analysis_blueprints
    name: Pandas 分析藍圖（僅示意）
    description: 提供 pandas 分析步驟與函式輪廓，協助快速驗證 KPI/圖表資料集。
    provider: gemini
    model: gemini-2.5-flash
    temperature: 0.2
    max_tokens: 4200
    system_prompt: |
      你是 Python/pandas 顧問。輸出繁體中文 Markdown。
      只提供「步驟與示意」；避免貼完整可執行程式（以符合不直接修改程式的流程）。
    user_prompt: |
      請提供 pandas 分析藍圖（示意）：
      - 標準化後欄位型別檢查
      - 6 種視覺化所需的彙總資料集（groupby 規格）
      - 篩選器應用順序
      - 大資料量時的最佳實務（類別型、快取、避免重複計算）

  - id: visualization_edge_cases
    name: 圖表邊界案例與錯誤處理建議
    description: 列出常見視覺化失敗情境（空資料、缺日期、過多節點）與 UI 呈現方式。
    provider: openai
    model: gpt-4.1-mini
    temperature: 0.15
    max_tokens: 3200
    system_prompt: |
      你是資料產品錯誤處理專家。輸出繁體中文 Markdown。
      提供 edge cases、預期行為、以及使用者可理解的提示文案。
    user_prompt: |
      請列出配送儀表板常見 edge cases：
      - deliver_date 全無法解析
      - quantity 缺失或為 0
      - Sankey/Network 節點爆炸
      - 篩選後為空
      對每個案例提供：偵測方式、UI 呈現、替代圖表/建議操作。
